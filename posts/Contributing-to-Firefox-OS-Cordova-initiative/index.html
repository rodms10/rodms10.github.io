<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><title>Contributing to FirefoxOS Cordova initiative</title><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Rodrigo Silveira" name="author"/><meta content="After the project I was working on got cancelled I started contributing to FirefoxOS Cordova project. Cordova is the open sourced version of PhoneGap, a framework for writing multi-platform mobile applications. You write your app using web standards and Cordova provides you with javascript APIs and plumbing to access the ..." name="description"/><meta content="Contributing to FirefoxOS Cordova initiative" property="og:title"/><meta content="blog.post" property="og:type"/><meta content="http://blog.rodms.com/posts/Contributing-to-Firefox-OS-Cordova-initiative/" property="og:url"/><meta content="http://blog.rodms.com/theme/img/avatar.jpeg" property="og:image"/><meta content="After the project I was working on got cancelled I started contributing to FirefoxOS Cordova project. Cordova is the open sourced version of PhoneGap, a framework for writing multi-platform mobile applications. You write your app using web standards and Cordova provides you with javascript APIs and plumbing to access the ..." property="og:description"/><link href="http://blog.rodms.com/theme/css/style.2b02ea6c.min.css" rel="stylesheet"/><link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css" rel="stylesheet"/><link href="http://blog.rodms.com/theme/css/pygments.css" rel="stylesheet"/><!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><link href="http://blog.rodms.com/favicon.ico" rel="shortcut icon"/><link href="http://blog.rodms.com/theme/img/apple-touch-icon.png" rel="apple-touch-icon"/><link href="http://blog.rodms.com/theme/img/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"/><link href="http://blog.rodms.com/theme/img/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"/><link href="http://blog.rodms.com/" rel="alternate" title="Rodrigo Silveira ATOM Feed" type="application/atom+xml"/></head><body class=""><header id="article-head"><div class="vertical"><div class="inner"><a href="http://blog.rodms.com" id="blog-logo"><img alt="Blog Logo" src="http://blog.rodms.com/theme/img/avatar.jpeg"/></a><h2 class="blog-title">Rodrigo Silveira</h2><h3 class="blog-description">Digressions on life, web and stuff.</h3></div></div></header><nav class="navbar"><ul class="navlist"><li><a href="http://blog.rodms.com/about/">About</a></li><li class="divider-vertical"></li><li><div id="tag-menu"><ul class="taglist"><li><a href="http://blog.rodms.com/tag/blog/"><i class="icon-tag"></i>blog</a></li><li><a href="http://blog.rodms.com/tag/bugzillator/"><i class="icon-tag"></i>bugzillator</a></li><li><a href="http://blog.rodms.com/tag/cordova/"><i class="icon-tag"></i>cordova</a></li><li><a href="http://blog.rodms.com/tag/pelican/"><i class="icon-tag"></i>pelican</a></li><li><a href="http://blog.rodms.com/tag/planet/"><i class="icon-tag"></i>planet</a></li></ul></div><a href="http://blog.rodms.com/tags/" id="nav-tags"><i class="icon-tag"></i>Tags</a></li><li class="divider-vertical"></li><li><a href="http://blog.rodms.com/archives/"><i class="icon-th-list"></i>Archives</a></li></ul></nav><main class="main-content" role="main"><div class="content"><div class="articles"><section id="content"><article class="post"><header><h1 class="post-title"><a href="" rel="bookmark" title="Permalink to Contributing to FirefoxOS Cordova initiative">Contributing to FirefoxOS Cordova initiative</a></h1></header><div class="post-meta"><footer class="post-info"><span class="label">Date:</span> <abbr class="published" title="2014-04-15T00:00:00"><i class="icon-calendar"></i>15 Apr 2014</abbr> <span class="label">Tags:</span> <a href="http://blog.rodms.com/tag/cordova/"><i class="icon-tag"></i>cordova</a> <a href="http://blog.rodms.com/tag/planet/"><i class="icon-tag"></i>planet</a></footer></div><section class="post-content"><p>After the project I was working on <a href="LINK">got cancelled</a> I started contributing to <a href="LINK">FirefoxOS Cordova project</a>. Cordova is the open sourced version of PhoneGap, a framework for writing multi-platform mobile applications. You write your app using web standards and Cordova provides you with javascript APIs and plumbing to access the device's internals, such as accessing contacts, GPS and camera. Each mobile operating system has its own plugins for doing the communication between the javascript API and the OS.</p><p>To get a better understanding on how to write a cordova app for Firefox OS, I highly recommend the <a href="LINK">mozilla hacks post</a> on the subject.</p><p>There is little documentation available on how to work on the framework side. Cordova is written in node.js, which made it easier for me to find my way around. It took me much code digging and asking around to find my way around. I thought it might be useful to do a write up.</p><h2>The repositories</h2><p>Cordova code is organized into multiple repositories. The main ones you need to be aware of for Firefox OS development are <code>cordova-cli</code>, <code>cordova-firefoxos</code> and <code>cordova-plugin-*</code>. Here is a brief description of them:</p><ul><li><code>cordova-cli</code> - is where all command line interface code is located. The platform specific code here lives under <code>src/metadata</code> and are config parsers that run when the <code>prepare</code> command executes.</li><li><code>cordova-firefoxos</code> - is the main repository for the Firefox OS platform. The code here is resposible for handling Firefox OS cordova commands.</li><li><code>cordova-plugin-*</code> - are repositories for plugins. They contain code for all supported platforms too.</li></ul><h2>Running it locally</h2><p>It's super helpfull to run cordova entirely from local code so that you can change code and see the effects. With multiple repository organization corodova uses this can be tricky. Make sure you have <a href="LINK">git</a> and <a href="http://nodejs.org/">nodejs</a> installed.</p><p>First lets get the <code>ffos</code> branch of <code>cordova-cli</code> from mozilla-cordova github account and install the dependencies. From the directory you'd like to keep cordova code run:</p><div class="codehilite"><pre><span class="nv">$ </span>git clone https://github.com/mozilla-cordova/cordova-cli.git
<span class="nv">$ </span><span class="nb">cd </span>cordova-cli
<span class="nv">$ </span>npm install
<span class="nv">$ </span><span class="nb">cd</span> ..
</pre></div><p>The cordova binary is located at <code>cordova-cli/bin/cordova</code>. From now on this is what we'll use for all our CLI needs. You can add it to your <code>PATH</code> if you want.</p><p>Then let's clone for <code>cordova-firefoxos</code>:</p><div class="codehilite"><pre><span class="nv">$ </span>git clone https://github.com/mozilla-cordova/cordova-firefoxos.git
<span class="nv">$ </span><span class="nb">cd </span>cordova-firefoxos
<span class="nv">$ </span><span class="nb">cd</span> ..
</pre></div><p>Before creating an app, there's a little trick to point cordova to local platform. Create a file named <code>firefoxos.json</code> with the following contents:</p><div class="codehilite"><pre><span class="p">{</span>
    <span class="nt">"lib"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"firefoxos"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"uri"</span><span class="p">:</span> <span class="s2">"/&lt;FULL PATH TO&gt;/cordova-firefoxos"</span><span class="p">,</span>
            <span class="nt">"version"</span><span class="p">:</span> <span class="s2">"dev"</span><span class="p">,</span>
            <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"cordova-firefoxos-dev"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div><p>Make sure to set the full path to <code>cordova-firefoxos</code> folder under <code>uri</code>. We can now create a new cordova app by running <code>create</code>. Let's create it in <code>myapp</code> folder and give it the original project name of <code>io.myapp</code> and name it <code>myapp</code>. The fourth parameter to <code>create</code> is the json config file we just create as a string. To create the app run:</p><div class="codehilite"><pre><span class="nv">$ </span>cordova-cli/bin/cordova create myapp io.myapp myapp <span class="s2">"$(cat firefoxos.json)"</span>
<span class="nv">$ </span><span class="nb">cd </span>myapp
</pre></div><p>If you want to use a local copy of <code>cordova-firefoxos</code> platform code on a cordova app you already created, you can create a json file with the same contents as above under <code>youapp/.cordova/config.json</code>. In fact, the fourth parameter created that file for you. Go check.</p><p>To add the platform, all you need to run is:</p><div class="codehilite"><pre><span class="nv">$ </span>../cordova-cli/bin/cordova platform add firefoxos
</pre></div><p>That's it. If you make any changes to <code>cordova-firefoxos</code> remove and add the platform again to run it.</p><h2>Adding a plugin</h2><p>Local plugins are much easier to handle.</p></section><section class="post-footer share"><h4>Share this post:</h4><a class="icon-twitter" href="http://twitter.com/share?text=Contributing%20to%20FirefoxOS%20Cordova%20initiative%20via%20@rodms10" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;"><span class="hidden">Twitter</span></a> <a class="icon-facebook-sign" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.rodms.com/posts/Contributing-to-Firefox-OS-Cordova-initiative/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;"><span class="hidden">Facebook</span></a></section></article><div class="comments inner"><div id="disqus_thread"></div><script type="text/javascript">
      var disqus_identifier = "posts/Contributing-to-Firefox-OS-Cordova-initiative/";
      (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//rodms.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] ||
          document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script></div></section></div></div><footer class="site-footer"><div class="social-icons"><a href="http://twitter.com/rodms10" target="_blank" title="Follow"><i class="icon-twitter icon-2x"></i></a> <a href="https://github.com/rodms10" target="_blank" title="Fork"><i class="icon-github icon-2x"></i></a> <a href="http://www.linkedin.com/in/rodms10" target="_blank" title="Network"><i class="icon-linkedin icon-2x"></i></a> <a href="http://blog.rodms.com/feed.xml" rel="alternate" target="_blank" title="Subscribe"><i class="icon-rss icon-2x"></i></a></div><address id="about">Powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a> a static site generator, written in <a href="http://python.org">Python <i class="icon-external-link"></i></a>.</address></footer></main><script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script src="http://blog.rodms.com/theme/js/pack.min.js?47aa4328"></script><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45383543-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script></body></html>